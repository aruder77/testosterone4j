<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<title>Spezifikation der Use-Cases</title>

<link href="book.css" rel="stylesheet" type="text/css">
<link href="code.css" rel="stylesheet" type="text/css">
<link rel="home" href="ivp.html" title="">
</head>
<body>
<a name="useCases"></a>
<h1>Spezifikation der Use-Cases</h1>
<p>
Nachdem die Benutzeroberfläche in Form von Activities erfolgreich modelliert ist, können nun die Use-Cases
der Anwendung komfortabel durch den TDsl-Editor spezifiziert werden. 
</p>
<p>
Der Rumpf eines Use-Cases sieht folgendermaßen aus:
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
<span class="keyword">useCase</span>&nbsp;OpenDocument&nbsp;<span class="keyword">initial</span>&nbsp;MainWindowActivity&nbsp;{
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;...
<br/>
}&nbsp;=&gt;&nbsp;NavigationViewActivity
<br/>
</p>
</div>
</div>
</p>
<p>
<em>OpenDocument</em> ist der eindeutige Name des UseCases. Mit <span class="inlinecode"><span class="keyword">initial</span></span> wird die Activity benannt,
die als Ausgangs-Activity des Use-Cases dient. Das optionale Schlüsselwort <span class="inlinecode">=&gt;</span> gibt die Activity
an mit der der Use-Case endet. Standardmäßig wird hierfür die Ausgangs-Activity angenommen.
</p>
<p>
Innerhalb des Use-Case Blocks können beliebig viele <em>Statements</em> abgesetzt werden. Die verschiedenen
Arten von <em>Statements</em> werden in den folgenden Sektionen vorgestellt.
</p>
<p>
Optional kann ein Use-Case auch Parameter besitzen:
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
<span class="keyword">useCase</span>&nbsp;OpenDocument(StringDT&nbsp;documentName)&nbsp;<span class="keyword">initial</span>&nbsp;MainWindowActivity&nbsp;{
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;...
<br/>
}&nbsp;=&gt;&nbsp;NavigationViewActivity
<br/>
</p>
</div>
</div>
</p>
<p>
Der Typ des Parameters muss hierbei ein spezifizierter #<span class="inlinecode"><span class="keyword">datatype</span></span> sein.
</p>
<a name="controlOperationCalls"></a>
<h2>Aufruf von Operationen</h2>
<p>
In erster Linie ist natürlich der Aufruf von Operationen der Activities und deren Felder von Interesse.
Der Aufruf einer Operation erfolgt durch das Voranstellen von <span class="inlinecode">#</span> gefolgt durch entweder
<ul>
	<li>
		dem Namen der Activity-Operation, oder
	</li>
	<li>
		dem Namen des Fields und anschließendem Namen der Control-Operation, getrennt durch einen Punkt.
	</li>
</ul>
</p>
<p>
Anschließend können noch die Parameter der Operation zugewiesen werden. Da jeder Parameter nur optional
angegeben werden muss, muss jedoch die Zuweisung durch explizite Angabe des Parameternamens erfolgen.
</p>
<p>
Beispiele für den Aufruf von Operationen sind:
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
#userName.setText(str=<span class="string">"peterPan"</span>)
<br/>
#password.setText
<br/>
#loginButton.click
<br/>
</p>
</div>
</div>
</p>
<p>
oder als Activity-Operation
 
<div class="literallayout">
<div class="incode">
<p class="code">
#login(userName=<span class="string">"peterPan"</span>,&nbsp;password=<span class="string">"secret"</span>)
<br/>
</p>
</div>
</div>
</p>
<p>
Als Wert für einen Parameter kann dabei eine beliebiger Xtend-Ausdruck angegeben werden, so dass hier
die volle Mächtigkeit von Xtend/Java zur Verfügung steht! Dabei kann natürlich auch auf die Use-Case
Parameter oder Variablen (siehe <a href="ivp_7.html#variables" title="Go to &quot;Variablen&quot;" >section variables</a>) zugegriffen werden.
</p>
<p>
Falls ein oder mehrere Parameter einer Operation beim Aufruf nicht angegeben werden, wählt der Testdaten-Generator
einen Wert anhand der spezifizierten Äquivalenzklassen-Angaben des entsprechenden Datentyps. Die Strategie
bei der Wahl des Wertes hängt von den beim Test angegebenen Coverage-Kriterien ab (siehe <a href="ivp_8.html#tests" title="Go to &quot;Anlage von Tests&quot;" >section tests</a>). 
</p>
<a name="subUseCaseCalls"></a>
<h2>Aufruf von anderen Use-Cases</h2>
<p>
Um maximale Wiederverwendung zu fördern können Use-Cases andere Use-Cases aufrufen. Dies erfolgt über
das Schlüsselwort <span class="inlinecode"><span class="keyword">call</span></span>.
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
<span class="keyword">call</span>&nbsp;OpenDocument
<br/>
</p>
</div>
</div>
</p>
<p>
Die Übergabe eventueller Use-Case Parameter erfolgt analog der Parameter-Übergabe bei Operationen. 
</p>
<a name="variables"></a>
<h2>Variablen</h2>
<p>
Oft ist es sinnvoll Werte für den späteren Zugriff in Variablen zu speichern. Dies erfolgt über die Schlüsselwörter
<span class="inlinecode">val</span>, für finale (nicht veränderbare) Variablen, und <span class="inlinecode">var</span>, für veränderbare Variablen. Der
Typ der Variablen muss nur angegeben werden wenn der Typ nicht durch einen angegebenen Ausdruck abgeleitet
werden kann.
</p>
<p>
Als Werte für Variablen können beliebige Xtend-Ausdrücke sowie Aufrufe von Operationen mit Rückgabewert
verwendet werden.
</p>
<p>
Beispiele:
<div class="literallayout">
<div class="incode">
<p class="code">
<span class="keyword">val</span>&nbsp;userNameValue&nbsp;=&nbsp;#userName.getText
<br/>
<span class="keyword">var</span>&nbsp;String&nbsp;someString
<br/>
someString&nbsp;=&nbsp;<span class="string">"TDsl&nbsp;sucks!"</span>.replace(<span class="string">"su"</span>,&nbsp;<span class="string">"ro"</span>)&nbsp;
<br/>
</p>
</div>
</div>
</p>
<a name="ifElse"></a>
<h2>Bedingte Verzweigungen</h2>
<p>
Auch bedingte Verzweigungen sind in TDsl natürlich möglich. Die Syntax folgt der Java/Xtend Syntax:
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
<span class="keyword">if</span>&nbsp;(&lt;Xtend-Ausdruck&gt;)&nbsp;{
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;...
<br/>
}&nbsp;<span class="keyword">else</span>&nbsp;<span class="keyword">if</span>&nbsp;{
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;...
<br/>
}&nbsp;<span class="keyword">else</span>&nbsp;{
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;...
<br/>
}
<br/>
</p>
</div>
</div>
</p>
<p>
Die <span class="inlinecode"><span class="keyword">else</span>&nbsp;<span class="keyword">if</span></span> und <span class="inlinecode"><span class="keyword">else</span></span> Zweige sind wie üblich optional.
</p>
<p>
In jedem Zweig können wiederum alle TDsl Statements dieses Kapitels verwendet werden.
</p>
<a name="expressions"></a>
<h2>Einbettung von Xtend Code</h2>
<p>
An jeder Stelle des Use-Cases kann beliebiger Xtend-Code eingebettet werden. Damit steht die volle Mächtigkeit
von Xtend/Java zur Verfügung. Der Xtend-Code muss in eckige Klammern eingefasst werden.
</p>
<p>
Beispiel:
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
#userName.setText(str=<span class="string">"peterPan"</span>)
<br/>
[&nbsp;Thread::sleep(1000)&nbsp;]
<br/>
#password.setText
<br/>
[&nbsp;System::out.println(<span class="string">"User&nbsp;logging&nbsp;in."</span>)&nbsp;]
<br/>
#loginButton.click
<br/>
</p>
</div>
</div>
</p>
<p>
Auch in dem eingebettetem Code stehen die Parameter und Variablen des Use-Cases zur Verfügung.
</p>
<a name="asserts"></a>
<h2>Verifikation von Ergebnissen</h2>
<p>
Die Verifikation von bestimmten Prüfpunkten ist stark abhängig vom verwendeten Test-Automatisierungs-Framework.
Deshalb gibt es in TDsl dafür keine explizite Unterstützung. Die Verifikation kann aber leicht Implementierungs-abhängig
als Xtend-Code realisiert werden.
</p>
<p>
Wichtig ist jedoch, dass dem verifizierenden Xtend-Code-Block das Schlüsselwort <span class="inlinecode"><span class="keyword">assert</span></span> vorangestellt
wird um TDsl bewusst zu machen dass es sich hier um verifizierenden Code handelt. Dies ist deshalb wichtig
weil bei der Testfall-Generierung die Testfälle quasi <em>"trocken"</em> durchlaufen werden und die <span class="inlinecode"><span class="keyword">assert</span></span>s
hier übersprungen werden müssen.
</p>
<p>
<div class="literallayout">
<div class="incode">
<p class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;inputUserName&nbsp;=&nbsp;<span class="string">"Peter&nbsp;Pan"</span>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#userName.setText(str=inputUserName)
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">val</span>&nbsp;actualUserName&nbsp;=&nbsp;#userName.getText
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">assert</span>&nbsp;[&nbsp;org.junit.Assert::assertEquals(inputUserName,&nbsp;actualUserName)&nbsp;]
<br/>
</p>
</div>
</div>
</p>
</body>
</html>
